<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理页面</title>
</head>
<body>
    <input type="file" id="avatar-upload">
    <div id="upload"></div>
    <div id="link"></div>
    <script src="../node_modules/leancloud-storage/dist/av-min.js"></script>
    <script>
        AV.init({
            appId: "wGmHSCdbizmo4o5EVXcKSaHn-gzGzoHsz",
            appKey: "4SskzGc8tqaDVp3Qe0s8EKND",
            serverURL: "https://wgmhscdb.lc-cn-n1-shared.com"
        });
        //const TestObject = AV.Object.extend('TestObject')
            //const testObject = new TestObject();
            //testObject.set('words', 'Hello world!');
            //testObject.save().then((testObject) => {
            //console.log('保存成功。')
        //})
        const avatarUpload = document.getElementById('avatar-upload')
        avatarUpload.addEventListener('change',()=>{
            const localFile = avatarUpload.files[0]
            let name = localFile.name
            const file = new AV.File(name, localFile)
            file.save({
                onprogress: (progress) => {
                    let uploadProgress = progress.percent
                    upload.innerText = uploadProgress
                }
            }).then((file) => {
                upload.innerText = 'success'
            });
            file.save().then((file) => {
                let url = file.attributes.url
                link.innerText = url
            })
        })
    </script>
</body>
</html>